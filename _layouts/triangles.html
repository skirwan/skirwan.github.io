---
layout: default
---
<style>
h2 {
	font-weight: 800;
}
h3 {
	border:none;
	margin-bottom: -10px;
	padding-bottom: 0;
	margin-top: 40px;
	font-weight: 100;
}

.grammar-list h3 {
	margin-top: 0;
}

.box {
	width: 100%;
	border: 1px solid #CCC;
	margin-top: 20px;
	margin-bottom: 20px;
}
.box textarea {
	width: 100%;
	max-width: 100%;
	font-family: monospace;
	font-size: 15px;
	margin: 0;
	box-sizing: border-box;
	height: 22px;
	border: none;
	border-top: 1px solid #CCC;
	margin-bottom: -4px;
}

.box .textarea {
	border-top: 1px solid #CCC;
	font-family: monospace;
	font-size: 15px;
}

.alt {
	background-color: #EEF;
}

.symbols { padding-left: 4px; background: white; }
.symbols img { margin-left:-3px; margin-right:-3px; margin-top:-4px; }
.symbols span { display:inline-block; width: 9px; }
.symbols a { display:inline-block; margin-left:-6px; color: #333; text-decoration:none;}

.lexemes {
	background: white;
	border-top: 1px solid #CCC;
	padding: 2px;
}
.lexemes span {
	display:inline-block;
	margin-left: 5px;
}
.guess {
	background: #CCC;
	padding: 2px;
	font-family: cursive;
	text-shadow: 0 -1px #EEE;
	font-size: 22px;
	text-align: center;
	padding-left:10px;
	padding-right:10px;
}
.guess img { margin-left:-3px; margin-right:-3px; margin-bottom: -2px; }
.lexemes span:first-child { margin-left: 0; }
#grammar-section {
	margin-bottom: 30px;
}
.grammar-list { 
	background: #eee5e8;
	margin-top: 10px;
	border: 1px solid #ccc;
}
.grammar-list h3 {
	background: #510021;
	margin-bottom: 5px;
	padding: 5px;
	color: white;
}
.grammar-list h3 a {
	float:right;
	color: white;
	font-size:10px;
	line-height: 3;
}
.grammar-list .row {
	text-align: center;
	border-bottom: 1px solid white;
	padding-top: 5px;
	padding-bottom: 5px;
}
.grammar-list.collapse .row { display: none; }
.grammar-list.collapse .add-block { display: none; }

.grammar-list .row * { vertical-align: top; }
.grammar-list .row input { 
	font-family: monospace;
	font-size: 15px;
}
.grammar-list .source { display: inline-block; }
.grammar-list .source input { display: block; }
.grammar-list .source .symbols { 
	margin-top: 5px;
	margin-bottom: -10px;
	background: transparent;
	text-align: left;;
}
.add-block {
	text-align: center;
}
</style>

<h1 class="page-title">Triangles</h1>

{{ content }}

<h2>Grammar</h2>
<div id="grammar-section"></div>

<h2>Known Messages</h2>
<div id="known"></div>

<h2>Transliteration Checker</h2>
<div class="box" id="checker"></div>

<script>
(function(){
	const aCode = 'a'.charCodeAt(0);
	const zCode = 'z'.charCodeAt(0);
	const prefixes = [
		{ t: 'xi', m: 'UN' },
		{ t: 'omi', m: 'ANTI' },
		{ t: 'caus+', m: 'command' },
		{ t: 'us+', m: 'seek' },
		{ t: 'strp', m: 'cease' },
		{ t: 'b+', m: 'become' },
		{ t: 'mapr', m: 'break/decay/close' },
		{ t: 'lik+', m: 'love' },
		{ t: 'tlaic', m: 'war' },
	];
	const suffixes = [
		{ t: 'ky', m: 'subject' },
		{ t: 'my', m: 'to' },
		{ t: 'vy', m: 'from' },
		{ t: 'kyd', m: 'subject-class' },
		{ t: 'myd', m: 'to-class' },
		{ t: 'vyd', m: 'from-class' },
		{ t: 'zyn', m: 'upon/against' },
		{ t: 'if', m: 'possessive' },
		{ t: 'ad', m: 'past' },
		{ t: 'dd', m: 'started' },
		{ t: 'db', m: 'subjunctive' },
		{ t: 'ot', m: 'instant' },
		{ t: 'qt', m: 'ongoing' },
		{ t: 'wt', m: 'imperative' },

		{ t: 'vai', m: 'participle' },
		{ t: 'lama', m: 'GURU' },
		{ t: 'yet+', m: 'beginning' },
		{ t: 'yet', m: 'middle' },
	];
	const vocabulary = [
		{ t: 'pas', m: 'singular-article' },
		{ t: 'trrm', m: 'pronoun-possessive' },
		{ t: 'erd', m: 'Ancients' },
		{ t: 'oao', m: 'LIGHT' },
		{ t: 'tzrt', m: 'ORGA' },
		{ t: 'tzr', m: 'ORG' },
		{ t: 'tli', m: 'MATERIALPLANE' },
		{ t: 'm+tz', m: 'SUN' },
		{ t: 'aiia', m: 'moon' },
		{ t: 'ctgn+', m: 'earth' },
		{ t: 'tian', m: 'MIRROR' },
		{ t: 'qui', m: 'time' },
		{ t: 'pi+c+', m: 'pi+c+' },
		{ t: 'axa', m: 'GREYMYR' },
		{ t: 'maht', m: 'FEAR' },
		{ t: 'kzi', m: 'active' },
		{ t: 'migg', m: 'join' },
		{ t: 'ktw', m: 'essence' },
		{ t: 'jrin', m: 'connect' },
	]
	
	const stdToEmpressMap = {
		'd': 'l',
		't': 'o',
		'a': 'i',
		'y': 't',
		'i': 'm',
		'r': 'g',
		'k': 'v',
		'q': 'j',
		'+': 'n',
		'u': 's',
		'z': 'r',
		's': 'k',
		'm': 'b',
		'o': 'd',
		'x': 'a',
		'e': 'e',
		'c': 'w',
		'l': 'f',
		'b': '?',
		'p': 'p',
		'v': 'h',
		'n': 'y',
		'j': 'c',
		'w': '∂',
		'h': 'z',
		',': ',',
		'f': 'x',
		'g': 'q',
	}

	const empressToStdMap = { };

	Object.keys(stdToEmpressMap).forEach( (k) => {
		empressToStdMap[stdToEmpressMap[k]] = k;
	});

	const translateListeners = [];

	let needsTranslate = false;
	function retranslate() {
		if (needsTranslate) return;
		needsTranslate = true;

		window.setTimeout(() => {
			if(needsTranslate) {
				needsTranslate = false;
				
				translateListeners.forEach((callback) => callback());
			}
		}, 2);
	}

	function buildGrammarEditorRow(listContainer, list, item, footer) {
		const row = document.createElement('div');
		row.className = 'row';

		const source = document.createElement('div');
		source.className = 'source';

		const from = document.createElement('input');
		from.type = 'text';
		from.value = item.t;
		from.spellcheck = false;
		source.appendChild(from);

		const from2 = document.createElement('input');
		from2.type = 'text';
		from2.value = modeSwitch(item.t, stdToEmpressMap);
		from2.spellcheck = false;
		from2.className = 'alt';
		source.appendChild(from2);

		const symbols = document.createElement('div');
		symbols.className = 'symbols';
		source.appendChild(symbols);
		
		from.addEventListener('keyup', (evt) => {
			setTimeout(() => {
				item.t = from.value;
				retranslate();
			}, 0);
		});
		watch(from, from2, symbols, null);
		transliterate(item.t, symbols);
		
		row.appendChild(source);

		row.appendChild(document.createTextNode('→'))

		const to = document.createElement('input');
		to.type = 'text';
		to.value = item.m;
		to.addEventListener('keyup', (evt) => {
			setTimeout(() => {
				item.m = to.value;
				retranslate();
			}, 0);
		});
		row.appendChild(to);

		const remove = document.createElement('a');
		remove.href = '#';
		remove.innerText = '[remove]';
		remove.addEventListener('click', (evt) => {
			evt.preventDefault();
			const idx = list.indexOf(item);
			list.splice(idx, 1);
			listContainer.removeChild(row);
			retranslate();
		});
		row.appendChild(remove);

		listContainer.insertBefore(row, footer);

		item.row = row;
	}

	function addRow(listContainer, list, footer) {
		const item = { t: 'from', m: 'to' };
		list.push(item);
		buildGrammarEditorRow(listContainer, list, item, footer);

		retranslate();
	}

	function buildGrammarEditor(where, label, list) {
		const listContainer = document.createElement('div');
		listContainer.className = 'grammar-list collapse';
		where.appendChild(listContainer);

		const header = document.createElement('h3');
		header.innerHTML = label;
		listContainer.appendChild(header);

		const expand = document.createElement('a');
		expand.href = '#';
		expand.innerText = '[expand]';
		expand.addEventListener('click', (evt) => {
			evt.preventDefault();
			if (expand.innerText == '[expand]') {
				listContainer.classList.remove('collapse');
				expand.innerText = '[collapse]';
			} else {
				listContainer.classList.add('collapse');
				expand.innerText = '[expand]';
			}
			
		});
		header.appendChild(expand);
		
		const addBlock = document.createElement('div');
		addBlock.className = 'add-block';
		listContainer.appendChild(addBlock);

		list.forEach((item) => {
			buildGrammarEditorRow(listContainer, list, item, addBlock);
		});

		const add = document.createElement('a');
		add.href = '#';
		add.className = 'add';
		add.innerText = '[add]';
		add.addEventListener('click', (evt) => {
			evt.preventDefault();
			addRow(listContainer, list, addBlock);
		});
		addBlock.appendChild(add);

		const clear = document.createElement('a');
		clear.href = '#';
		clear.className = 'add';
		clear.innerText = '[remove all]';
		clear.addEventListener('click', (evt) => {
			evt.preventDefault();
			list.forEach((item) => {
				if (item.row) {
					listContainer.removeChild(item.row);
				}
			})
			list.splice(0);
			retranslate();
		});
		addBlock.appendChild(clear);
	}

	const grammarSection = document.getElementById('grammar-section');
	buildGrammarEditor(grammarSection, 'Prefixes', prefixes);
	buildGrammarEditor(grammarSection, 'Suffixes', suffixes);
	buildGrammarEditor(grammarSection, 'Words', vocabulary);

	function transliterate(msg, triangleNode, retain) {
		if (!retain) {
			Array.from(triangleNode.childNodes).forEach((n)=>triangleNode.removeChild(n));
		}
		Array.from(msg).forEach((c, idx) => {
			let code = c.toLowerCase().charCodeAt(0);
			let el = null;
			if ( code >= aCode && code <= zCode ) {
				el = document.createElement('img');
				el.src = "{{ "/assets/triangles/" | relative_url }}" + ( 3818 + (code - aCode) * 2 + idx % 2 ) + ".png" 
			} else if ( c == "+" || c == "#" ) {
				el = document.createElement('img');
				el.src = "{{ "/assets/triangles/" | relative_url }}" + ( 3870 + idx % 2 ) + ".png" 
			} else if ( c == "," ) {
				el = document.createElement('img');
				el.src = "{{ "/assets/triangles/" | relative_url }}" + ( 3874 + idx % 2 ) + ".png" 
			}  else if ( c == "." ) {
				el = document.createElement('img');
				el.src = "{{ "/assets/triangles/" | relative_url }}" + ( 3876 + idx % 2 ) + ".png" 
			} else /* if ( c == " ") */ {
				el = document.createElement('span');
			}
			triangleNode.appendChild(el)
		});
	};
	
	function translate(msg, lexemeNode) {
		Array.from(lexemeNode.childNodes).forEach((n)=>lexemeNode.removeChild(n));
		
		let words = msg.toLowerCase().split(/[^a-z\+\#]/).filter((s)=>!!s)
		words.forEach((w) => {
			w = w.replaceAll('#', '+');

			let start = '';
			
			let dirty = true;
			while (dirty) {
				dirty = false;
				prefixes.forEach((p) => {
					if (w.substring(0, p.t.length) == p.t) {
						dirty = true;
						if (start) { start += '-'; }
						start += p.m
						w = w.substring(p.t.length);
					}
				});
			}
			
			let end = '';
			
			dirty = true;
			while (dirty) {
				dirty = false;
				suffixes.forEach((p) => {
					if (w.substring(w.length - p.t.length) == p.t) {
						dirty = true;
						if (end) { end = '-' + end; }
						end = p.m + end;
						w = w.substring(0, w.length - p.t.length);
					}
				});
			}
			
			let found = false
			vocabulary.forEach((p) => {
				if (w == p.t) {
					w = p.m
					found = true
				}
			});
			
			if (!found && !!w) {
				w = '[' + w + ']';
			}
			
			let built = '';
			if (start) { built = start; }
			if (w) { 
				if (built) { built += '-'; }
				built += w;
			}
			if (end) {
				if (built) { built += '-'; }
				built += end;
			}
			
			lexemeNode.appendChild(document.createTextNode(built + ' '));
		});
	}
	
	function modeSwitch(msg, map) {
		const directValue = Array.from(msg).map((c) => c == '#' ? '+' : c).join('');
		const altValue =  Array.from(directValue).map((c) => map[c] ?? c).join('');
		return altValue;
	}

	function watch(stdNode, empressNode, symbolNode, lexemeNode) {
		let dirty = false;
		function translateIfNeeded(node, altNode, altMap, needsMapping) {
			if (!dirty) return;
			dirty = false;

			const directValue = node.value;
			const altValue =  modeSwitch(directValue, altMap);

			const value = needsMapping ? altValue : directValue;
			
			transliterate(value, symbolNode);
			if(lexemeNode) {
				translate(value, lexemeNode);
			}
			if(altNode) {
				altNode.value = altValue;
			}
		}
		
		stdNode.addEventListener('keyup', (evt) => {
			dirty = true;
			window.setTimeout(() => translateIfNeeded(stdNode, empressNode, stdToEmpressMap, false), 1);
		});

		if (empressNode) {
			empressNode.addEventListener('keyup', (evt) => {
				dirty = true;
				window.setTimeout(() => translateIfNeeded(empressNode, stdNode, empressToStdMap, true), 1);
			});
		}
	}
	
	function fillMessageBox(containerNode, message, readonly) {
		let inbox = null;
		let altInbox = null;

		if (readonly) {
			inbox = document.createElement('div');
			inbox.innerText = message;
			inbox.className = 'textarea';

			altInbox = document.createElement('div');
			altInbox.innerText = modeSwitch(message, stdToEmpressMap);
			altInbox.className = 'textarea alt';
		} else {
			inbox = document.createElement('textarea');
			inbox.value = message;
			inbox.spellcheck = false;

			altInbox = document.createElement('textarea');
			altInbox.className = 'alt';
			altInbox.value = modeSwitch(message, stdToEmpressMap)
			altInbox.spellcheck = false;
		}
		
		const symbolBox = document.createElement('div');
		symbolBox.className = 'symbols';
		const lexemeBox = document.createElement('div');
		lexemeBox.className = 'lexemes';
		containerNode.appendChild(symbolBox);
		containerNode.appendChild(inbox);
		containerNode.appendChild(altInbox);
		containerNode.appendChild(lexemeBox);
		
		transliterate(message, symbolBox);
		
		if (!readonly) {
			watch(inbox, altInbox, symbolBox, lexemeBox);
		}

		translate(message, lexemeBox);

		translateListeners.push(() => {
			let from = readonly ? message : inbox.value;
			translate(from, lexemeBox);
		});
	}
	
	fillMessageBox(document.getElementById('checker'), 'type here', false);
	
	function interpolate(containerNode, message) {
		const text = message.split(/<[^>]+>/);
		const symbols = message.match(/<[^>]+>/g) ?? [];
		
		text.forEach((t, idx) => {
			if (t) {
				containerNode.appendChild(document.createTextNode(t));
			}
			
			if (idx < symbols.length) {
				const span = document.createElement('code');
				transliterate(symbols[idx].slice(1, -1), span);
				//span.innerHTML = '(' + span.innerHTML + ')'
				containerNode.appendChild(span);
			}
		});
	}
	function appendNewMessageBox(containerNode, message, guess) {
		const div = document.createElement('div');
		div.className = 'box';
		containerNode.appendChild(div);
		fillMessageBox(div, message, true);
		
		if (guess) {
			const g = document.createElement('div');
			g.className = 'guess';
			div.appendChild(g);
			
			interpolate(g, guess);
		}
	}
	
	Array.from(document.getElementsByTagName('code')).forEach((code) => {
		const message = code.innerText;
		code.className += ' symbols';
		code.innerHTML = '';
		transliterate(message, code)
	});
	
	const known = [
		{
			name: "Cloud Alchemy Lab", 
			messages: [
				{ m: 'erdky ktwvy aiiaif ktwmy ctgn#if pas miggqtad.', g: 'The Ancients joined moon\'s essence to the earth\'s essence.' },
			],
		},{
			name: 'Ancient Bear Cave West',
			messages: [
				{ m: 'erdky xioaomyd pas xilik+qtad.', g: 'The Ancients hated the Darkness' },
				{ m: 'erdky quimy strpqtad caus+vai xioaokyd pas strpotdd.', g: 'The Ancients paused time, temporarily halting the Darkness' },
				{ m: 'erdky oaomy xioaozyn us+qtad.', g: 'The Ancients sought to light the darkness.' },
				{ m: 'erdky tzrtmyd caus+qtad.', g: 'The Ancients were in command of orga' },
				{ m: 'erdky tzrvyd tzrtmyd b+otdd, caus+qtad.', g: 'The Ancients commanded that org begin becoming orga' },
			],
		},{
			name: 'Ancient Bear Cave East (Reversed*)',
			messages: [
				{ m: 'tzrtkyd erdmy tlaicqtdd.', g: 'The orga began to war upon the Ancients' },
				{ m: 'tzrtkyd quimy xistrpqtdd.', g: 'The orga restarted time' },
				{ m: 'tzrtkyd erdmy xilik#qtdd.', g: 'The orga began to hate the Ancients' },
				{ m: 'erdky tzrtmyd us#qtad caus#vai quiky strpotad.', g: 'The Ancients asked of the orga that time stop' },
				{ m: 'erdky oaomy xioaozyn us#qtad caus#vai tzrtkyd caus#qtad.', g: 'The Ancients sought to light the darkness, commanding that the orga be controlled' },
			],
		},{
			name: 'Northern Ruins Outer - Original',
			messages: [
				{ m: 'wt myd zyn  xiwtdb.', g: '' },
				{ m: 'ky myd pas xiwtdb.', g: '' },
			],
		},{
			name: 'Northern Ruins Outer - Charged (Partially?)',
			messages: [
				{ m: 'ky tzrmyd xilik+qtdb.', g: '' },
				{ m: 'ky ximihmy xilik+qtdb.', g: '' },
			],
		},{
			name: 'Northern Ruins North',
			messages: [
				{ m: 'erdky tzrmyd caus+qtad.', g: 'The Ancients were in command of the org' },
				{ m: 'quiky kzizyn b+qtdb.', g: 'Time would become active' },
				{ m: 'quiky xikzizyn b+qtdb.', g: 'Time would become inactive' },
			],
		},{
			name: 'Northern Ruins West',
			messages: [
				{ m: 'tzrkyd quimy xikzizyn caus+otad.', g: 'The org commanded time to become inactive' },
				{ m: 'erdky tzrmyd caus+qtad caus+vai quiky xikziotdb.', g: 'The Ancients were in command of the org, commanding that time be inactive' },
			],
		},{
			name: 'Northern Ruins East',
			messages: [
				{ m: 'erdky tzrmyd dw+llqtad clrs+jr caus+vai quiky erdif xikziotdb.', g: 'The Ancients <dw+ll>ed <clrs+jr> (adverb?) to the org, commanding that the Ancients\' time be inactive.' },
				{ m: 'erdky tzrmyd dw+llqtad clrs+jr.', g: 'The Ancients <dw+ll>ed <clrs+jr> (adverb?) to the org' },
				{ m: 'quiky erdif xikziqtdb caus+vai erdky ximihqtad.', g: 'The Ancients\' time being frozen required that the Ancients un<mih>.' },
			],
		},{
			name: 'Windweft Ice Cave',
			messages: [
				{ m: 'oaoky pas, xioaozyn b#qtdb vaic oaoky pas, oaozyn b#qtdb.', g: 'That the Light be darkening <vaic> that the Light be brightened' },
				{ m: 'm#tzlamakyd erdif tianmy caus#qtad.', g: 'The Ancients\' sun masters were in commmand of mirror' },
				{ m: 'tianky pas omitlimy trrm jrinqtdb.', g: 'The mirror would connect to its shadow plane' },
				{ m: 'tianky pas tlivy trrm omitlimy trrm jrinqtdb.', g: 'The mirror would connect its material plane to its shadow plane' },
				{ m: 'erdky tianmy pas us#qtad.', g: 'The ancients sought the mirror' },
				{ m: 'omitliky xioaozyn b#qtdb.', g: 'The shadow plane would become with darkness' },
				{ m: 'omitliky oaozyn b#qtdb.', g: 'The shadow plane would become with light' },
				{ m: 'm#tzlamakyd erdif, amazdzyn b#qtdd.', g: 'The Ancients\' sun masters became <amazd>' },
				{ m: 'oaoky pas, oaozyn u#phjr b#qtdb.', g: 'The Light would become <u+phjr> with light' },
				{ m: 'oaoky pas, oaomy m#tzif grrdzyn sam#jr b#qtdb.', g: 'The Light would become <sam#jr> upon <grrd> to the sun\'s light' },
			],
		},{
			name: 'Foghaven Crossroads',
			messages: [
				{ m: 'xioaokyd pas oaomy xioaozyn lik#qtdd.', g: 'The Darkness began loving light upon darkness' },
				{ m: 'xioaokyd pas oaomy xioaozyn trrm crmdqtdd.', g: 'The Darkness began <crmd>ing light against its darkness' },
				{ m: 'xioaokyd pas tianmy pas us#qtdd.', g: 'The Darkness began seeking the mirror' },
				{ m: 'xioaokyd pas tlimy trrm crmdqtdd.', g: 'The Darkness began <crmd>ing its material plane' },
				{ m: 'xioaokyd erdmy xilik#qtdd.', g: 'Darkness began to hate the Ancients' },
				{ m: 'm#tzlamakyd erdif, mahtzyn b#qtdd.', g: 'The Ancients\' sun masters began to fear' },
			],
		},{
			name: 'GMV Ruins',
			messages: [
				{ m: 'xioaokyd pas xistrpqtdd.', g: 'The Darkness was unrelenting' },
				{ m: 'erdky, mahtzyn b#qtad.', g: 'The Ancients became afraid' },
				{ m: 'erdky tianmyd us#qtad.', g: 'The Ancients sought the mirror' },
				{ m: 'erdky m#tzyet#my pas trrm grqtdb.', g: 'The Ancients would <gr> that the past be theirs' },
				{ m: 'erdky tianmyd us#qtad caus#vai m#tzyet#ky pas trrm grwtdb.', g: 'The ancients sought the mirror that the past <gr> theirs' },
				{ m: 'm#tzyet#ky pas m#tzyetmy pas maprqtdb.', g: 'The past would age to the present' },
				{ m: 'erdky pas m#tzyetmy pas maprqtad.', g: 'An ancient aged to the present' },
				{ m: 'tiankyd pas xiplacdmyd trrm jrinqtdd.', g: 'The mirror began connecting to its un<placd>' },
				{ m: 'tiankyd pas maprqtdd.', g: 'The mirror began aging' },
			],
		},{
			name: 'Foghaven Waterfall North',
			messages: [
				{ m: 'matalin+ky tianmy pas us+qtdb.', g: 'Mataline would seek the mirror' },
				{ m: 'matalin+ky oaomy xioaozyn lik+qtdb.', g: 'Mataline would love light upon darkness' },
				{ m: 'matalin+ky oaomy xioaozyn lik+qtdb.', g: 'Mataline would love light upon darkness' },
				{ m: 'matalin+ky pi+c+my oaoif xioaozyn tak+qtdb.', g: 'Mataline would <tak+> the light\'s <pi+c+> upon darkness' },
				{ m: 'matalin+ky tlivy trrm pi+c+my pas tak+qtdb.', g: 'Mataline would <tak+> from her material plane to the <pi+c+>' },
			],
		},{
			name: 'Foghaven Waterfall South',
			messages: [
				{ m: 'pi+c+ky pas aiialamamyd erdif qtdb.', g: 'The <pi+c+> would act upon the Ancients\' moon masters' },
				{ m: 'oaoky xioaozyn pas aiialamamyd erdif qtdb.', g: 'Light would act upon the Ancients\' moon masters against darkness' },
				{ m: 'aiialamakyd erdif, grrdzyn u+phjr b+qtdd.', g: 'The Ancients\' moon masters began becoming <u+phjr> upon <grrd>' },
				{ m: 'pi+c+ky pas aiialamamyd erdif caus+qtad.', g: 'The <pi+c+> was in command of the Ancients\' moon masters' },
				{ m: 'erdky oaomy xioaozyn us+qtad.', g: 'The Ancients sought to light the darkness' },
				{ m: 'erdky my pas caus+qtad.', g: 'The Ancients commanded (you?)' },
			],
		},{
			name: 'Shadowspring Citadel Level 1',
			messages: [
				{ m: 'xioaokyd erdmy tlaicqtdd.', g: 'Darkness made war on the Ancients' },
				{ m: 'erdky tianmyd pas ximaprqtad, qtad.', g: 'The Ancients had maintained the mirror' },
				{ m: 'erdky axamyd pas caus+qtad.', g: 'The Ancients were in command of the Greymyr' },
				{ m: 'axakyd pas tianmyd pas ximaprzyn caus+qtdd.', g: 'A Greymyr began commanding the maintenance of the mirror' },
				{ m: 'axakyd pas maprqtdd', g: 'That Greymyr was aging' },
				{ m: 'axakyd srm+zyn maprqtdd.', g: 'The Greymyrs began breaking upon <srm+>' },
				{ m: 'erdky mahtzyn b+otad.', g: 'The Ancients became afraid' },
				{ m: 'erdky mahtzyn axamyd pas rfrm b+otad.', g: 'The Ancients became <rfrm> afraid of (for?) that Greymyr' },
			],
		}
	];
	
	const knownBox = document.getElementById('known');
	known.forEach((s) => {
		const header = document.createElement('h3');
		header.innerText = s.name;
		knownBox.appendChild(header);
		s.messages.forEach((msg) => {
			appendNewMessageBox(knownBox, msg.m, msg.g);
		});
	});
})();
</script>